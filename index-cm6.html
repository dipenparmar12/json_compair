<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="theme-color" content="#08C988" />
    <title>Compare JSON files online - CodeMirror 6</title>
    <meta
      name="Description"
      content="FREE two-way JSON format, diff and merge tool with CodeMirror 6"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <link rel="shortcut icon" href="./img/onlinetextcompare.png" />
    <link rel="stylesheet" href="./css/ccsiteV6.css" />
    <link rel="stylesheet" type="text/css" href="./css/app.css" />

    <!-- pako for client-side gzip compression/decompression - v2.1.0 (latest) -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"
      crossorigin="anonymous"
    ></script>

    <!-- Utility scripts -->
    <script src="./utils.js"></script>
    <script src="./json_utils.js"></script>
    <script src="./utils_csv.js"></script>

    <!-- ES Module Import Map for CodeMirror 6 - Using unpkg with exact versions -->
    <script type="importmap">
      {
        "imports": {
          "@codemirror/state": "https://unpkg.com/@codemirror/state@6.4.1/dist/index.js",
          "@codemirror/view": "https://unpkg.com/@codemirror/view@6.34.1/dist/index.js",
          "@codemirror/language": "https://unpkg.com/@codemirror/language@6.10.3/dist/index.js",
          "@codemirror/commands": "https://unpkg.com/@codemirror/commands@6.7.1/dist/index.js",
          "@codemirror/lang-json": "https://unpkg.com/@codemirror/lang-json@6.0.1/dist/index.js",
          "@codemirror/merge": "https://unpkg.com/@codemirror/merge@6.7.2/dist/index.js",
          "@codemirror/search": "https://unpkg.com/@codemirror/search@6.5.6/dist/index.js",
          "@codemirror/autocomplete": "https://unpkg.com/@codemirror/autocomplete@6.18.1/dist/index.js",
          "@codemirror/lint": "https://unpkg.com/@codemirror/lint@6.8.2/dist/index.js",
          "@lezer/common": "https://unpkg.com/@lezer/common@1.2.2/dist/index.js",
          "@lezer/highlight": "https://unpkg.com/@lezer/highlight@1.2.1/dist/index.js",
          "@lezer/lr": "https://unpkg.com/@lezer/lr@1.4.2/dist/index.js",
          "@lezer/json": "https://unpkg.com/@lezer/json@1.0.2/dist/index.js",
          "codemirror": "https://unpkg.com/codemirror@6.0.1/dist/index.js",
          "crelt": "https://unpkg.com/crelt@1.0.6/index.js",
          "style-mod": "https://unpkg.com/style-mod@4.1.2/src/style-mod.js",
          "w3c-keyname": "https://unpkg.com/w3c-keyname@2.2.8/index.js"
        }
      }
    </script>

    <style>
      * {
        box-sizing: border-box;
      }
      
      #container {
        display: flex;
        flex-direction: column;
        height: 100vh;
      }

      .intro {
        padding: 5px;
        background: #f8f9fa;
        border-bottom: 1px solid #ddd;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      #view-container {
        flex: 1;
        overflow: hidden;
        position: relative;
        min-height: 0; /* Important for flex child scrolling */
      }

      /* Button styles */
      button {
        padding: 6px 14px;
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 4px;
        cursor: pointer;
        font-size: 13px;
        transition: all 0.2s;
      }

      button:hover {
        background: #f5f5f5;
        border-color: #999;
      }

      button.active {
        background: #08c988;
        color: white;
        border-color: #08c988;
      }

      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Pane-specific buttons */
      .pane-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
        font-size: 12px;
        padding: 4px 10px;
      }

      .copy-btn {
        display: none;
      }

    </style>
  </head>

  <body>
    <div id="container">
      <div class="intro">
        <button id="btn-format">Format JSON</button>
        <button id="btn-sort">Sort Keys</button>
        <button id="btn-share">ðŸ“‹ Share URL</button>
        <button id="btn-templates">Examples</button>
        <button id="btn-clear-all" style="display: none">Clear All</button>
        <span style="margin-left: auto; font-size: 13px; color: #666">
          <strong>CodeMirror 6</strong> - Enhanced Git-style diff alignment
        </span>
      </div>

      <div id="view-container"></div>

      <div id="diff-status">Ready to compare JSON</div>
    </div>

    <script type="module">
      // Import CodeMirror 6 core and extensions
      import { EditorView } from "@codemirror/view";
      import { EditorState } from "@codemirror/state";
      import { json } from "@codemirror/lang-json";
      import { MergeView } from "@codemirror/merge";
      import {
        lineNumbers,
        highlightActiveLineGutter,
        highlightSpecialChars,
        drawSelection,
        dropCursor,
        rectangularSelection,
        crosshairCursor,
        highlightActiveLine,
        keymap,
      } from "@codemirror/view";
      import {
        foldGutter,
        indentOnInput,
        syntaxHighlighting,
        defaultHighlightStyle,
        bracketMatching,
        foldKeymap,
      } from "@codemirror/language";
      import {
        history,
        defaultKeymap,
        historyKeymap,
      } from "@codemirror/commands";
      import {
        highlightSelectionMatches,
        searchKeymap,
      } from "@codemirror/search";
      import {
        closeBrackets,
        autocompletion,
        closeBracketsKeymap,
        completionKeymap,
      } from "@codemirror/autocomplete";
      import { lintKeymap } from "@codemirror/lint";

    </script>
  </body>
</html>
